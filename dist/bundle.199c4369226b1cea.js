(()=>{let e=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[-9,-9,-9,-9,-9,-9,-9,-9,-9,-9]],t=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[-9,-9,-9,-9,-9,-9,-9,-9,-9,-9]];const n=[[[0,0,0,1],[0,1,1,1]],[[2,0,0,0],[2,2,2,0]],[[0,0,3,3],[0,3,3,0]],[[4,4,0,0],[0,4,4,0]],[[0,5,5,0],[0,5,5,0]],[[0,6,6,6],[0,0,6,0]],[[7,7,7,7],[0,0,0,0]]];let l=!0;const r=document.getElementById("play"),o=()=>{!l||F||x||(document.getElementById("play").style.display="none",document.getElementById("restart").style.display="flex",l=!1,E(),N(),O(),u=setInterval(B,1e3),m=setInterval(k,a[p]),g=setInterval(C,a[p]),y=performance.now())};r.addEventListener("click",o);const s=()=>{l?(l=!1,E(),document.getElementById("pause-btn").style.color="var(--color-piece0)"):l||(l=!0,cancelAnimationFrame(h),document.getElementById("pause-btn").style.color="var(--color-piece4)")};document.getElementById("pause-btn").addEventListener("click",s);const c=()=>{document.getElementById("restart").style.display="none",document.getElementById("play").style.display="flex",i()};document.getElementById("restart").addEventListener("click",c);const i=()=>{l=!0,$=!1,clearInterval(g),clearInterval(m),clearInterval(u),f=1,d=60,he=0,pe=0,document.getElementById("points1").innerHTML=he,document.getElementById("points2").innerHTML=pe,document.getElementById("level").innerHTML=f,document.getElementById("time").innerHTML=d,e=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[-9,-9,-9,-9,-9,-9,-9,-9,-9,-9]],F=!1,p=0,H=[],t=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[-9,-9,-9,-9,-9,-9,-9,-9,-9,-9]],x=!1,P=[],cancelAnimationFrame(h),h=null,Y(),Z()};let d=60,f=1;const a=[1e3,900,800,700,600,500,400,300,200,100];let u,m,g,h,p=0,y=null,I=null,v=!1;const E=()=>{l||(null===y&&(y=performance.now()),I=performance.now(),I-y>59&&(v||(Ae(),v=!0)),I-y>120&&(_e(),y=performance.now(),v=!1),x||Z(),F||Y(),h=requestAnimationFrame(E))},B=()=>{l||(document.getElementById("time").innerHTML=d,d--,0===d&&(p++,document.getElementById("time").innerHTML="New Level",d=60,f++,document.getElementById("level").innerHTML=f,b()))},k=()=>{!1!==Pe[40].pressed||l||$||(K(),z())};let C=()=>{!1!==Pe[83].pressed||l||j||(R(),G())};const b=()=>{f<9&&(se||(clearInterval(g),g=setInterval(C,a[p]),ce||clearInterval(m),m=setInterval(k,a[p])))};let M=null,L=null,T=null,w=null,H=[],P=[],_=!1,A=!1,F=!1,x=!1,$=!1,j=!1;const q=e=>new Promise((t=>setTimeout(t,e)));async function N(){$=!0,we=0,L=n[Math.floor(7*Math.random())];let t=L[0].filter((e=>e>0));M=t[0],H=[];for(let t=3;t<6;t++)(e[0][t]<0||e[1][t]<0)&&(F=!0);if(await q(500),!F){for(let t=3;t<7;t++)L[0][t-3]>0&&(e[0][t]=M,H.push([0,t]));for(let t=3;t<7;t++)L[1][t-3]>0&&(e[1][t]=M,H.push([1,t]))}U(),$=!1}async function O(){j=!0,He=0,w=n[Math.floor(7*Math.random())];let e=w[0].filter((e=>e>0));T=e[0],P=[];for(let e=3;e<6;e++)(t[0][e]<0||t[1][e]<0)&&(x=!0);if(await q(500),!x){for(let e=3;e<7;e++)w[0][e-3]>0&&(t[0][e]=T,P.push([0,e]));for(let e=3;e<7;e++)w[1][e-3]>0&&(t[1][e]=T,P.push([1,e]))}V(),j=!1}const z=()=>{if(!_){for(let e=H.length-1;e>=0;e--)H[e][0]=H[e][0]+1;D()}},D=()=>{W();for(let t=H.length-1;t>=0;t--){let n=H[t][0],l=H[t][1];e[n][l]=M}},G=()=>{if(!A){for(let e=P.length-1;e>=0;e--)P[e][0]=P[e][0]+1;J()}},J=()=>{X();for(let e=P.length-1;e>=0;e--){let n=P[e][0],l=P[e][1];t[n][l]=T}},K=()=>{for(let t=0;t<H.length;t++){let n=H[t][0]+1,l=H[t][1];e[n][l]<0&&(_=!0)}if(_){for(let t=0;t<H.length;t++){let n=H[t][0],l=H[t][1];e[n][l]=-M}return Q(),!0}return!1},Q=()=>{ee(),N(),_=!1},R=()=>{for(let e=0;e<P.length;e++){let n=P[e][0]+1,l=P[e][1];t[n][l]<0&&(A=!0)}if(A){for(let e=0;e<P.length;e++){let n=P[e][0],l=P[e][1];t[n][l]=-T}return S(),!0}return!1},S=()=>{A&&(te(),O(),A=!1)},U=()=>{x&&F&&(l=!0,ke())},V=()=>{x&&F&&(l=!0,ke())},W=()=>{for(let t=0;t<e.length-1;t++)for(let n=0;n<e[t].length;n++)e[t][n]>0&&(e[t][n]=0)},X=()=>{for(let e=0;e<t.length-1;e++)for(let n=0;n<t[e].length;n++)t[e][n]>0&&(t[e][n]=0)},Y=()=>{$=!0;for(let t=0;t<e.length-1;t++)for(let n=0;n<e[t].length;n++)if(Math.abs(e[t][n])>0){let l=Math.abs(e[t][n]),r="_"+t+n;document.getElementById(r).style.backgroundColor=`var(--color-piece${l})`}else if(0===e[t][n]){let e="_"+t+n;document.getElementById(e).style.backgroundColor="var(--color-piece0)"}$=!1},Z=()=>{j=!0;for(let e=0;e<t.length-1;e++)for(let n=0;n<t[e].length;n++)if(Math.abs(t[e][n])>0){let l=Math.abs(t[e][n]),r="__"+e+n;document.getElementById(r).style.backgroundColor=`var(--color-piece${l})`}else if(0===t[e][n]){let t="__"+e+n;document.getElementById(t).style.backgroundColor="var(--color-piece0)"}j=!1},ee=()=>{$=!0;let t=0;for(let n=0;n<16;n++)e[n].every((e=>e<0))&&(e.splice(n,1),e.unshift(Array(10).fill(0)),t++);t>0&&Ee(t),$=!1},te=()=>{j=!0;let e=0;for(let n=0;n<16;n++)t[n].every((e=>e<0))&&(t.splice(n,1),t.unshift(Array(10).fill(0)),e++);e>0&&Be(e),j=!1};let ne=[],le=[],re=!0,oe=!0,se=!1,ce=!1;const ie=()=>{Pe[65].func=Le,Pe[68].func=be,re=!0},de=()=>{clearInterval(g),g=setInterval(C,a[p]),re=!0},fe=()=>{Pe[37].func=Me,Pe[39].func=Ce,oe=!0},ae=()=>{clearInterval(m),m=setInterval(k,a[p]),oe=!0},ue=()=>{const e=document.getElementById("attacks1");for(;e.firstChild;)e.removeChild(e.firstChild);for(let t=0;t<ne.length;t++)if(2===ne[t]){const t=document.createElement("img");t.src="./icons/cherryBomb2.png",e.appendChild(t)}else if(1===ne[t]){const t=document.createElement("img");t.src="./icons/weakBomb2.png",e.appendChild(t)}const t=document.getElementById("attacks2");for(;t.firstChild;)t.removeChild(t.firstChild);for(let e=0;e<le.length;e++)if(2===le[e]){const e=document.createElement("img");e.src="./icons/cherryBomb2.png",t.appendChild(e)}else if(1===le[e]){const e=document.createElement("img");e.src="./icons/weakBomb2.png",t.appendChild(e)}};let me=0,ge=0,he=0,pe=0;const ye=[0,1,1,2,2,3,3,4,4,5],Ie=[1,1,4,9,20];let ve=1;const Ee=t=>{0===e[15].filter((e=>e<0||e>0)).length&&(ve=10);let n=f;n>9&&(n=9),he+=100*Ie[t]*ye[n]*ve,document.getElementById("points1").innerHTML=he,3===t&&(ne.push(1),ue()),4===t&&(ne.push(2),ue()),ve=1},Be=e=>{0===t[15].filter((e=>e<0||e>0)).length&&(ve=10);let n=f;n>9&&(n=9),pe+=100*Ie[e]*ye[n]*ve,document.getElementById("points2").innerHTML=pe,3===e&&(le.push(1),ue()),4===e&&(le.push(2),ue()),ve=1},ke=()=>{he>pe?(me++,document.getElementById("player1-wins").innerHTML=me):he<pe&&(ge++,document.getElementById("player2-wins").innerHTML=ge)},Ce=()=>{$=!0;let t=!0;for(let n=0;n<H.length;n++){let l=H[n][0],r=H[n][1];(e[l][r+1]<0||void 0===e[l][r+1])&&(t=!1)}if(t){for(let e=0;e<H.length;e++)H[e][1]=H[e][1]+1;D(),K()}$=!1},be=()=>{let e=!0;for(let n=0;n<P.length;n++){let l=P[n][0],r=P[n][1];(t[l][r+1]<0||void 0===t[l][r+1])&&(e=!1)}if(e){for(let e=0;e<P.length;e++)P[e][1]=P[e][1]+1;J(),R()}},Me=()=>{$=!0;let t=!0;for(let n=0;n<H.length;n++){let l=H[n][0],r=H[n][1];(e[l][r-1]<0||void 0===e[l][r-1])&&(t=!1)}if(t){for(let e=0;e<H.length;e++)H[e][1]=H[e][1]-1;D(),K()}$=!1},Le=()=>{j=!0;let e=!0;for(let n=0;n<P.length;n++){let l=P[n][0],r=P[n][1];(t[l][r-1]<0||void 0===t[l][r-1])&&(e=!1)}if(e){for(let e=0;e<P.length;e++)P[e][1]=P[e][1]-1;J(),R()}j=!1},Te=[[[[-1,-2],[-1,0],[0,-1],[0,-1]],[[0,0],[-1,1],[-2,2],[-1,-1]],[[0,1],[0,1],[1,0],[1,2]],[[1,1],[2,-2],[1,-1],[0,0]]],[[[-1,0],[-2,1],[-1,-1],[0,-2]],[[0,0],[0,0],[-1,2],[-1,2]],[[0,2],[1,1],[2,-1],[1,0]],[[1,-2],[1,-2],[0,0],[0,0]]],[[[-1,-1],[0,-2],[-1,1],[0,0]],[[1,1],[0,2],[1,-1],[0,0]]],[[[-1,1],[0,-1],[-1,0],[0,-2]],[[1,-1],[0,1],[1,0],[0,2]]],[[[0,0],[0,0],[0,0],[0,0]]],[[[-1,1],[0,-1],[0,-1],[0,0]],[[0,0],[0,0],[0,0],[-1,1]],[[0,0],[0,1],[0,1],[1,-1]],[[1,-1],[0,0],[0,0],[0,0]]],[[[-1,1],[0,0],[1,-1],[2,-2]],[[1,-1],[0,0],[-1,1],[-2,2]],[[-1,2],[0,1],[1,0],[2,-1]],[[1,-2],[0,-1],[-1,0],[-2,1]]]];let we=0,He=0;const Pe={37:{pressed:!1,func:Me,firstPress:!1},39:{pressed:!1,func:Ce,firstPress:!1},40:{pressed:!1,func:()=>{if(!l){if($=!0,!K()&&!F){z();const e=f;e>9&&(e=9),he+=1*ye[e],document.getElementById("points1").innerHTML=he}$=!1}},firstPress:!1},65:{pressed:!1,func:Le,firstPress:!1},68:{pressed:!1,func:be,firstPress:!1},83:{pressed:!1,func:()=>{if(!l){if(j=!0,!R()&&!x){G();const e=f;e>9&&(e=9),pe+=1*ye[e],document.getElementById("points2").innerHTML=pe}j=!1}},firstPress:!1}};document.addEventListener("keydown",(e=>{Pe[e.keyCode]&&(Pe[e.keyCode].pressed=!0,!1===Pe[e.keyCode].firstPress&&(Pe[e.keyCode].func(),y=performance.now(),Pe[e.keyCode].firstPress=!0))})),document.addEventListener("keyup",(n=>{switch(Pe[n.keyCode]&&(Pe[n.keyCode].pressed=!1),Pe[n.keyCode]&&(Pe[n.keyCode].firstPress=!1),n.keyCode){case 38:(()=>{if($=!0,!F){let t=[],n=Te[M-1][we];for(let e=0;e<n.length;e++){let l=H[e][0],r=H[e][1],o=n[e][0],s=n[e][1];t.push([l+o,r+s])}if((t=>{for(let n=0;n<t.length;n++){let l=t[n][0],r=t[n][1];if(l<0||r<0||e[l][r]<0||void 0===e[l][r])return!0}return!1})(t))return $=!1,!1;H=t,D(),we===Te[M-1].length-1?we=0:we++}$=!1})();break;case 87:(()=>{if(j=!0,!x){let e=[],n=Te[T-1][He];for(let t=0;t<n.length;t++){let l=P[t][0],r=P[t][1],o=n[t][0],s=n[t][1];e.push([l+o,r+s])}if((e=>{for(let n=0;n<e.length;n++){let l=e[n][0],r=e[n][1];if(l<0||r<0||t[l][r]<0||void 0===t[l][r])return!0}return!1})(e))return j=!1,!1;P=e,J(),He===Te[T-1].length-1?He=0:He++}j=!1})();break;case 32:s();break;case 80:o();break;case 79:c();break;case 13:(()=>{if(void 0===ne[0]||l)return;let e=re;re&&(re=!1),e&&(2===ne[0]?(clearInterval(g),g=setIntervaldropLoop2=setInterval(C,a[p]/4),setTimeout(de,1e4)):1===ne[0]&&(Pe[65].func=be,Pe[68].func=Le,setTimeout(ie,1e4)),ne.shift(),ue())})();break;case 81:(()=>{if(void 0===le[0]||l)return;let e=oe;oe&&(oe=!1),e&&(2===le[0]?(clearInterval(m),m=setInterval(k,a[p]/4),setTimeout(ae,1e4)):1===le[0]&&(Pe[37].func=Ce,Pe[39].func=Me,setTimeout(fe,1e4)),le.shift(),ue())})()}}));const _e=()=>{Object.keys(Pe).forEach((e=>{Pe[e].pressed&&Pe[e].func()}))},Ae=()=>{!0===Pe[40].pressed&&Pe[40].func(),!0===Pe[83].pressed&&Pe[83].func()}})();
//# sourceMappingURL=bundle.199c4369226b1cea.js.map